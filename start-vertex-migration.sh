#!/bin/bash
# Script per avviare Claude con Vertex AI per la migrazione del repository

echo "üöÄ Avvio istanza Claude con Vertex AI Sonnet 4 per migrazione repository"
echo "üìÅ Directory di lavoro: $(pwd)"
echo ""

# Carica configurazione Vertex AI
source claude-code-multiport/config/vertex-claude.env 2>/dev/null || echo "‚ö†Ô∏è Configurazione Vertex AI non trovata"

# Attiva ambiente virtuale
source claude-code-multiport/venv/bin/activate

echo "üìã ISTRUZIONI PER CLAUDE (VERTEX AI):"
echo "======================================"
echo ""
echo "Ciao Claude! Sei un'istanza specializzata che gira su Vertex AI Sonnet 4."
echo "Il tuo compito √® migrare e riorganizzare questo repository."
echo ""
echo "üéØ OBIETTIVO:"
echo "Migrare l'architettura moderna 'claude-code-multiport' (LiteLLM come libreria)"
echo "nella directory principale, sostituendo l'approccio legacy proxy."
echo ""
echo "üìÇ SITUAZIONE ATTUALE:"
echo "- Directory principale: Approccio LiteLLM PROXY (legacy)"
echo "- claude-code-multiport/: Approccio LiteLLM LIBRERIA (moderno, da migrare)"
echo ""
echo "üìã I TUOI PRIMI TASK:"
echo "1. Leggi MIGRATION_PLAN.md per il piano completo"
echo "2. Leggi CLAUDE_VERTEX_INSTRUCTIONS.md per istruzioni dettagliate"
echo "3. Inizia con Phase 1: Repository Analysis"
echo ""
echo "üîê SICUREZZA (CRITICO):"
echo "- NON committare mai file .env con credenziali reali"
echo "- Verifica sempre git status prima dei commit"
echo "- Usa solo file .env.template per version control"
echo ""
echo "üö® STOP IMMEDIATO se:"
echo "- I check di sicurezza falliscono"
echo "- I test non passano"
echo "- Git repository si corrompe"
echo ""

# Istruzioni per l'utente
echo ""
echo "ü§ñ PER AVVIARE L'ISTANZA CLAUDE:"
echo "================================"
echo ""
echo "1. Apri una nuova sessione Claude con Vertex AI Sonnet 4"
echo ""
echo "2. Incolla questo prompt iniziale:"
echo ""
echo "---INIZIO PROMPT---"
echo "Sono Claude specializzato per la migrazione del repository claude-code-multimodel."
echo "Directory di lavoro: /home/sam/claude-code-multimodel/"
echo "Modello: Vertex AI Sonnet 4 (us-east5)"
echo ""
echo "Prima azione: Leggi e analizza questi file:"
echo "- MIGRATION_PLAN.md (piano di migrazione completo)"
echo "- CLAUDE_VERTEX_INSTRUCTIONS.md (istruzioni dettagliate)"
echo ""
echo "Poi inizia con Phase 1: Repository Analysis eseguendo i comandi specificati."
echo "Riporta i risultati dell'analisi prima di procedere."
echo "---FINE PROMPT---"
echo ""

echo "3. Una volta che Claude ha letto i file, pu√≤ iniziare la migrazione"
echo ""
echo "üìä MONITORAGGIO PROGRESSO:"
echo "- Claude creer√† MIGRATION_REPORT.md con i progressi"
echo "- Controlla git log per vedere i commit di migrazione"
echo "- Testa i servizi dopo ogni fase"
echo ""

echo "‚úÖ Setup completato. Pronto per iniziare la migrazione!"